<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="A blog by Pawel Sobala">


    <meta property="twitter:site" content="@pawel_sobala">

<meta property="twitter:title" content="Analysis of the tq_get() function">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:image" content="/img/logo.png">

<meta property="twitter:description" content="tq_get() function from the tidyquant library enables to download financial and economic data from various sources">

<title>


     Pawel Sobala - Analysis of the tq_get() function 

</title>
<link rel="canonical" href="/blog/analysis-of-the-tq-get-function/">


<style media="screen">
  @font-face {
  font-family: 'Nexa Bold';
  src: url('/fonts/Nexa Bold.otf');
}

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
  display: block;
}
body {
  line-height: 1;
}
ol, ul {
  list-style: none;
}
blockquote, q {
  quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}
table {
  border-collapse: collapse;
  border-spacing: 0;
}

*,
*:before,
*:after {
  box-sizing: border-box;
}
a,
a:visited,
a:focus,
a:active {
  text-decoration: none;
}
html {
  height: 100%;
  font-size: 16px;
}
body {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: column;
  -moz-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  -webkit-justify-content: flex-start;
  -moz-justify-content: flex-start;
  -ms-justify-content: flex-start;
  justify-content: flex-start;
  width: 100%;
  min-height: 100%;
  font-weight: 400;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
  color: #111111;
  line-height: 1.6;
  text-rendering: optimizeLegibility !important;
}
.icon {
  text-rendering: geometricPrecision !important;
}
section {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-justify-content: center;
  -moz-justify-content: center;
  -ms-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  width: 100%;
}
.container {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  width: 100%;
}
section.header .container {
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  -webkit-justify-content: center;
  -moz-justify-content: center;
  -ms-justify-content: center;
  justify-content: center;
}
section.header .content {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: column;
  -moz-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
}
section.header .container .logo {
  max-width: 100px;
  margin-left: -2em;
}
section.header .name {
  padding-top: 20px;
  font-size: 28px;
  font-family: 'Nexa Bold', 'Helvetica Neue', 'Arial', sans-serif;
  letter-spacing: -0.005rem;
  text-transform: uppercase;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  font-smoothing: antialiased;
  color: #333333;
  color: #555555;
}
section.header nav {
  margin-bottom: 16px;
}
section.header nav ul {
  list-style: none;
  text-align: center;
  display: -webkit-inline-flex;
  display: -moz-inline-flex;
  display: -ms-inline-flexbox;
  display: -ms-inline-flex;
  display: inline-flex;
}
section.header nav ul a {
  margin-left: 6px;
  margin-right: 6px;
}
section.header nav ul a:first-child {
  margin-left: 0;
}
section.header nav ul a:last-child {
  margin-right: 0;
}
section.header nav ul li {
  color: #555555;
  font-weight: 400;
  font-size: 14px;
  text-transform: uppercase;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
  -webkit-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -moz-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -ms-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -o-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
}
section.header nav ul li:hover {
  color: #111111;
}
section.footer .container {
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  -webkit-justify-content: center;
  -moz-justify-content: center;
  -ms-justify-content: center;
  justify-content: center;
  flex-direction: column-reverse;
  width: 100%;
  text-align: center;
}
section.footer .container a {
  font-size: 14px;
  margin-left: 6px;
  margin-right: 6px;
  opacity: 0.6;
  -webkit-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -moz-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -ms-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -o-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
}
section.footer .container a:first-child {
  margin-left: 0;
}
section.footer .container a:last-child {
  margin-right: 0;
}
section.footer .container a:hover {
  opacity: 0.8;
}
section.footer .container a .icon {
  width: 16px;
  height: 16px;
}
section.footer .container .copyright {
  flex-grow: 0.5;
  text-align: start;
}
section.footer .container .icons {
  flex-grow: 0.5;
  text-align: end;
}
section.main .container {
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  -webkit-justify-content: flex-start;
  -moz-justify-content: flex-start;
  -ms-justify-content: flex-start;
  justify-content: flex-start;
}
section.main .content {
  color: #111111;
  font-size: 16px;
}
section.main .content .title-container {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-justify-content: space-between;
  -moz-justify-content: space-between;
  -ms-justify-content: space-between;
  justify-content: space-between;
}
section.main .content .posts {
  margin-bottom: 4em;
}
section.main .content .page-heading {
  font-size: 20px;
  font-weight: 700;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
  letter-spacing: -0.005rem;
  text-transform: uppercase;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  font-smoothing: antialiased;
  color: #333333;
  margin-bottom: 16px;
}
section.main .content .front-matter .page-heading {
  margin-bottom: 0;
}
section.main .content .front-matter .meta {
  font-size: 14px;
  color: #666666;
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  margin-bottom: 32px;
}
section.main .content .front-matter .date,
section.main .content .front-matter .author,
section.main .content .front-matter .tags,
section.main .content .front-matter .word-count,
section.main .content .front-matter .reading-time .middot {
  display: none;
}
section.main .content .front-matter .middot {
  font-size: 6px;
  margin: 0 6px;
  display: inline;
  vertical-align: middle;
}
section.main .content .front-matter .middot:before {
  content: "•";
}
section.main .content .front-matter .tags ul {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: row;
  -moz-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
}
section.main .content .front-matter .tags ul li {
  -webkit-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -moz-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -ms-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -o-transition: opacity 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
}
section.main .content .front-matter .tags ul li:hover {
  opacity: 0.7;
}
section.main .content .front-matter .tags ul li a {
  color: #666666;
}
section.main .container.f04 {
  -webkit-justify-content: center;
  -moz-justify-content: center;
  -ms-justify-content: center;
  justify-content: center;
}
section.main .container.f04 .content {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: column;
  -moz-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
}
section.main .container.f04 .content .num {
  margin: 30px 0px 30px 0;
  font-weight: 400;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
  font-size: 50px;
}
section.main .container.f04 .content .detail {
  margin-bottom: 40px;
}
section.main .container .content .groupby {
  margin-top: 1em;
  padding-left: 0.5em;
}
section.main .container .content .post-item {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  display: list-item;
  list-style: disc inside;
}
section.main .container .content .post-item .meta {
  font-size: 14px;
  color: #666666;
  display: none;
  min-width: 100px;
}
section.main .container .content .see-more {
  font-style: italic;
  float: right;
  font-size: 0.9em;
  margin-top: 2em;
  color: #313537;
}
section.main .container .content .see-more:hover {
  color: #666;
}
section {
  padding: 0 16px;
}
section.header {
  padding-top: 10px;
}
section.header-home {
  padding-top: 36px;
}
section.main {
  padding-top: 32px;
}
section.main .container .content .post-item .meta {
    display: block;
}
section.main .container .content .post-item {
    display: flex;
    list-style: none;
}
a {
  color: #428bca;
  -webkit-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -moz-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -ms-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
  -o-transition: color 0.1s cubic-bezier(0.47, 0, 0.75, 0.72);
}
a:hover {
  color: #2a6496;
}
img {
  max-width: 100%;
}
section.main .content {
    width: 100%;
}
section.main .content .markdown {
  font-size: 1.1em;
  line-height: 1.75em;
  color: #313537;
  font-family: serif;
  font-weight: 300;
}
section.main .content .markdown h1,
section.main .content .markdown h2,
section.main .content .markdown h3,
section.main .content .markdown h4,
section.main .content .markdown h5,
section.main .content .markdown h6 {
  font-size: 22px;
  font-family: 'Helvetica Neue', 'Arial', sans-serif;
  letter-spacing: -0.005rem;
  font-weight: 700;
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  font-smoothing: antialiased;
  color: #333333;
  text-transform: none;
  margin-top: 1.75rem;
}
section.main .content .markdown h1 {
  font-size: 1.75rem;
  margin-bottom: 2rem;
}
section.main .content .markdown h2 {
  font-size: 1.5rem;
  margin-bottom: 1.5rem;
}
section.main .content .markdown h3 {
  font-size: 1em;
  margin-bottom: 1rem;
}
section.main .content .markdown h4,
section.main .content .markdown h5,
section.main .content .markdown h6 {
  font-size: 1rem;
  margin-bottom: 1rem;
  letter-spacing: none;
}
section.main .content .markdown code,
section.main .content .markdown pre {
  font-family: 'Menlo', monospace;
  font-size: 0.98rem;
  background-color: #f7f7f7;
}
section.main .content .markdown code {
  /* enclosed by single backtick (`) */
  padding: .15em .5em;
  border-radius: 2px;
}
section.main .content .markdown pre {
  /* Hugo specific: consider using the 'highlight' shortcode */
  display: block;
  margin-top: 1rem;
  margin-bottom: 2rem;
  padding: 1rem;
  line-height: 1.5em;
  white-space: pre;
  word-break: break-all;
  word-wrap: break-word;
}
@media (min-width: 769px) {
  section.main .content .markdown pre {
    width: 110%;
    margin-left: -4%;
  }
}
section.main .content .markdown pre code {
  /* enclosed by 4 backticks (````) */
  padding: 0;
  font-size: 0.9rem;
}
section.main .content .markdown a code {
  color: #428bca !important;
}
section.main .content .markdown a code:hover {
  text-decoration: underline;
}
section.main .content .markdown p {
  text-align: justify;
  margin-top: 0;
  margin-bottom: 1em;
}
section.main .content .markdown ul,
section.main .content .markdown ol,
section.main .content .markdown dl {
  margin-top: 1rem;
  margin-bottom: 2rem;
}
section.main .content .markdown dt {
  font-weight: bold;
}
section.main .content .markdown dd {
  margin-bottom: .5rem;
}
section.main .content .markdown ul {
  list-style-type: disc;
  list-style-position: outside;
  margin-bottom: 1.25rem;
}
section.main .content .markdown ol {
  list-style-type: decimal;
  margin-bottom: 1.25rem;
}
section.main .content .markdown li {
  margin-left: 2em;
}
section.main .content .markdown em {
  font-style: italic;
}
section.main .content .markdown strong {
  font-weight: 700;
}
section.main .content .markdown hr {
  position: relative;
  margin: 1.75rem 0;
  border: 0;
  border-top: 1px solid #808080;
  border-top: 1px solid #999999;
}
section.main .content .markdown abbr {
  font-size: 0.85rem;
  font-weight: bold;
  color: #666666;
  text-transform: uppercase;
}
section.main .content .markdown abbr[title] {
  cursor: help;
  border-bottom: 1px dotted #808080;
}
section.main .content .markdown blockquote {
  padding: .5rem 1rem;
  margin: .8rem 0;
  color: #7a7a7a;
  border-left: .25rem solid #e5e5e5;
}
section.main .content .markdown blockquote p:last-child {
  margin-bottom: 0;
}
section.main .content .markdown figure {
  width: 100%;
  background: #fff;
  margin-bottom: 1em;
}
section.main .content .markdown figure img {
  width: 100%;
  height: auto;
  max-width: 100%;
  display: block;
  position: static;
  margin: auto;
}
section.main .content .markdown table {
  margin-bottom: 1rem;
  width: 100%;
  border: 1px solid #e5e5e5;
  border-collapse: collapse;
}
section.main .content .markdown td,
section.main .content .markdown th {
  padding: .25rem .5rem;
  border: 1px solid #e5e5e5;
}
section.main .content .markdown tbody tr:nth-child(odd) td,
section.main .content .markdown tbody tr:nth-child(odd) th {
  background-color: #f7f7f7;
}
section.main .content .markdown .footnotes ol {
  list-style-type: decimal;
  margin-left: 16px;
}
section.main .content .markdown .footnotes li {
  list-style-type: unset;
}
section.main .content .markdown .footnote-ref {
  font-size: 0.7em;
}
section.main .content .navigation {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: column;
  -moz-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
}
section.main .content .navigation div {
  display: -webkit-flex;
  display: -moz-flex;
  display: -ms-flexbox;
  display: -ms-flex;
  display: flex;
  -webkit-flex-direction: row;
  -moz-flex-direction: row;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-align-items: center;
  -moz-align-items: center;
  -ms-align-items: center;
  align-items: center;
  margin-top: 1em;
}
section.main .content .navigation .icon {
  width: 16px;
  height: 16px;
}
section.main .content .navigation a {
  width: 250px;
  margin-left: 1em;
  text-align: center;
  font-style: italic;
  color: #313537;
}

/* Fonts */

.wf-raleway-n4-active body, 
.wf-raleway-n4-active section.header nav ul li,
.wf-raleway-n7-active section.main .content .page-heading,
.wf-raleway-n2-active section.main .container.f04 .content .num,
.wf-raleway-n7-active section.main .content .markdown h1,
.wf-raleway-n7-active section.main .content .markdown h2,
.wf-raleway-n7-active section.main .content .markdown h3,
.wf-raleway-n7-active section.main .content .markdown h4,
.wf-raleway-n7-active section.main .content .markdown h5,
.wf-raleway-n7-active section.main .content .markdown h6 {
  font-family: 'Raleway';
}

.wf-merriweather-n3-active section.main .content .markdown {
  font-family: 'Merriweather';
}

.wf-ubuntu-mono-n4-active section.main .content .markdown code,
.wf-ubuntu-mono-n4-active section.main .content .markdown pre {
  font-family: 'Ubuntu Mono';
}
</style>
<style media="(min-width: 600px)">
  body {
-webkit-justify-content: center;
-moz-justify-content: center;
-ms-justify-content: center;
justify-content: center;
}
.non-narrow.zero-top-spacing {
padding-top: 0 !important;
}
section {
padding: 0 16px;
margin-left: 100px;
margin-right: 100px;
max-width: 750px;
}
section.header {
background-color: transparent;
}
section.header .container {
-webkit-justify-content: flex-start;
-moz-justify-content: flex-start;
-ms-justify-content: flex-start;
justify-content: flex-start;
}
section.header .container .logo {
margin: 0;
}
section.header-home .container .logo {
max-width: 180px;
margin-left: 20px;
}
section.header-home .name-home {
padding-top: 30px;
font-size: 40px;
}
section.header-home nav ul li {
font-size: 18px;
}
section.header .content {
-webkit-align-items: flex-start;
-moz-align-items: flex-start;
-ms-align-items: flex-start;
align-items: flex-start;
}
section.header .name {
color: #333333;
}
section.header nav {
font-size: 14px;
margin-bottom: 0;
}
section.header nav ul {
text-align: left;
}
section.header nav ul li {
color: #666666;
}
section.header nav ul li:hover {
color: #333333;
}
section.footer {
background-color: transparent;
}
section.footer .container {
flex-direction: row;
}
section.footer .container a {
margin-left: 3px;
margin-right: 3px;
color: #666666;
}
section.footer .container a:hover {
color: #333333;
}
section.footer .container a .icon {
font-size: 18px;
}
section.footer .container a .icon.larger {
font-size: 20px;
}
section.main .content .front-matter .date,
section.main .content .front-matter .author,
section.main .content .front-matter .tags,
section.main .content .front-matter .word-count,
section.main .content .front-matter .reading-time .middot {
display: initial;
}
section.main .container.f04 {
-webkit-justify-content: flex-start;
-moz-justify-content: flex-start;
-ms-justify-content: flex-start;
justify-content: flex-start;
}
section.main .container.f04 .content {
-webkit-align-items: flex-start;
-moz-align-items: flex-start;
-ms-align-items: flex-start;
align-items: flex-start;
}
section.main .container.f04 .content .num {
margin: 0 0 10px 0;
font-size: 32px;
}
section.main .container.f04 .content .detail {
margin-bottom: 30px;
}
.container {
padding: 0 30px;
}
section.header {
padding-top: 60px;
padding-bottom: 60px;
}
section.footer {
padding-top: 30px;
padding-bottom: 60px;
}
section.main {
padding-top: 0;
}
section.main .container .content .post-item {
display: flex;
list-style: none;
padding-left: 1.5em;
}
section.main .container .content .post-item .meta {
display: block;
}
section.main.post {
padding-top: 60px;
padding-bottom: 60px;
}
section.main .content .markdown blockquote {
padding-right: 5rem;
padding-left: 1.25rem;
}
section.main .content .navigation {
-webkit-flex-direction: row;
-moz-flex-direction: row;
-ms-flex-direction: row;
flex-direction: row;
}
section.main .content .navigation div {
margin-top: 0em;
}
</style>
<style media="(min-width: 769px)">
  section.main .content .markdown figure {
width: 110%;
margin-left: -4%;
}
section.main .content .markdown img {
max-width: 110%;
width: 110%;
margin-left: -4%;
}
</style>

<noscript>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,600,700" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700" rel="stylesheet">
</noscript>


  <style type="text/css" media="screen">
    .hljs{display:block;background:white;padding:0.5em;color:#333333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-string,.hljs-variable,.hljs-template-variable,.hljs-strong,.hljs-emphasis,.hljs-quote{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-literal,.hljs-symbol,.hljs-bullet,.hljs-attribute{color:#0086b3}.hljs-section,.hljs-name{color:#63a35c}.hljs-tag{color:#333333}.hljs-title,.hljs-attr,.hljs-selector-id,.hljs-selector-class,.hljs-selector-attr,.hljs-selector-pseudo{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}
  </style>



  <style type="text/css" media="screen">
    .progressive{overflow:hidden;position:relative;background:#efefef}.progressive__img{width:100%;height:100%;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}.progressive--not-loaded{filter:blur(30px);-webkit-filter:blur(30px)}.progressive--is-loaded{filter:blur(20px);-webkit-filter:blur(20px);-webkit-animation:sharpen .5s both;animation:sharpen .5s both}@-webkit-keyframes sharpen{from{filter:blur(20px);-webkit-filter:blur(20px)}to{filter:blur(0);-webkit-filter:blur(0)}}@keyframes sharpen{from{filter:blur(20px);-webkit-filter:blur(20px)}to{filter:blur(0);-webkit-filter:blur(0)}}
  </style>



  <style type="text/css" media="screen">
    a {
    color: #527fc1f;
}

a:hover {
    color: #1a3152;
}

section.main .content .markdown, section.header .name, section.header nav ul li:hover {
    color: #181d2a;
}

section.header nav ul li {
    color: #6a7a8b;
}

section.main .content .markdown code {
    background-color: #f9f9f9;
    color: #527fc1f;
}

section.main .content .markdown pre, section.main .content .markdown pre code {
    background-color: #282a36;
    color: #87a5d2;
}

.hljs, .hljs-subst, .hljs-variable {
    color: #87a5d2;
}

.hljs-type {
    color: #97d28b;
}

.hljs-quote {
    color: #ffcb8d;
}

.hljs-string, .hljs-number, .hljs-selector-id, .hljs-selector-class, .hljs-template-tag, .hljs-deletion {
    color: #96c2d7;
}

.hljs-comment {
    color: #6a7a8b;
}

.hljs-regexp, .hljs-symbol, .hljs-template-variable {
    color: #ffcb8d;
}

.hljs-keyword, .hljs-attribute, .hljs-meta-keyword, .hljs-doctag, .hljs-name {
    color: #97d28b;
}

.hljs-link, .hljs-selector-attr, .hljs-selector-pseudo, .hljs-title, .hljs-section {
    color: #ff8e91;
}

.hljs-built_in, .hljs-bullet, .hljs-code, .hljs-addition {
    color: #97d28b;
}
  </style>





<link rel="shortcut icon"

    href="/img/favicon.ico"

>




</head>


<body>


<section class="header">

    <div class="container">
        <a href="/"><img class="logo" src="/img/logo.png" alt="logo" /></a>
        <div class="content">
            <a href="/"><div class="name"><h1>Pawel Sobala</h1></div></a>
            <nav>
                <ul>
                    
                        <a href="/blog/"><li>Blog</li></a>
                    
                    
                        
                            
                        
                    
                    
                        
                            <a href="/about/"><li>About</li></a>
                        
                    
                        
                            <a href="/ideas/"><li>Ideas</li></a>
                        
                    
                        
                    
                </ul>
            </nav>
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Analysis of the tq_get() function

</div>

                </div>
                <div class="meta">
                    <div class="date" title="Sun Jan 12 2020 00:00:00 UTC">Jan 12, 2020</div>
                    
                        
                        <div class="author" title="Pawel Sobala"><div class="middot"></div>Pawel Sobala</div>
                        
                    
                    <div class="reading-time"><div class="middot"></div>17 minute read</div>
                    <div class="tags">
                        <ul>
                          
                            <div class="middot"></div>
                            <li><a href="/tags/r-markdown">R Markdown</a> </li>
                          
                            <div class="middot"></div>
                            <li><a href="/tags/import-data">import data</a> </li>
                          
                            <div class="middot"></div>
                            <li><a href="/tags/tidyquant">tidyquant</a> </li>
                          
                            <div class="middot"></div>
                            <li><a href="/tags/package">package</a> </li>
                          
                        </ul>
                    </div>
                </div>
            </div>
            <div class="markdown">
                
    
    
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/plotly-binding/plotly.js"></script>
<script src="/rmarkdown-libs/typedarray/typedarray.min.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/crosstalk/js/crosstalk.min.js"></script>
<link href="/rmarkdown-libs/plotly-htmlwidgets-css/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="/rmarkdown-libs/plotly-main/plotly-latest.min.js"></script>
<link href="/rmarkdown-libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
<script src="/rmarkdown-libs/datatables-binding/datatables.js"></script>
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="/rmarkdown-libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="/rmarkdown-libs/dt-core/js/jquery.dataTables.min.js"></script>

<div id="TOC">
true
</div>

<style>
body {
text-align: justify}
</style>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>One of the most important parts of any analysis including financial or economic data is getting the data. Of course it is possible to download data diretcly from the Internet. However, in some cases there are limitations when downloading data. For example, only last 5 years of data is available, maybe the frequency is not suited to the needs of the analysis or it is cumbersome to update data on a regular basis in the code. Luckily, there are some functions that facilitate getting it in R. Of course it is possible to web scraping the data that is needed.
Recently, I came across <a href="http://varianceexplained.org/r/stock-changes/">this</a> article, where the <code class="r">library(tidyquant)</code> was utilized.
There financial data was obtained using <code class="r">tq_get()</code> function, which I didn’t know previously.<br />
The aim of this article is to analyse thouroughly this function from the tidyquant package.</p>
<div id="tq_get-function" class="section level2">
<h2>tq_get() function</h2>
<p>In the <code class="r">tq_get()</code> function it is possible to specify type of data that needs to be imported:</p>
<pre class="r"><code>args(tq_get)</code></pre>
<pre><code>## function (x, get = &quot;stock.prices&quot;, complete_cases = TRUE, ...) 
## NULL</code></pre>
<p>Different types of data can be obtained using the get argument from different sites.</p>
<table>
<caption>Get argument options</caption>
<thead>
<tr class="header">
<th>ID</th>
<th>Option</th>
<th>Source of data</th>
<th>Wrapper</th>
<th>Covered in this article</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.</td>
<td>“stock.prices”</td>
<td>Yahoo Finance</td>
<td>quantmod::getSymbols()</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>2.</td>
<td>“stock.prices.japan”</td>
<td>Yahoo Finance Japan</td>
<td>quantmod::getSymbols.yahooj()</td>
<td>No</td>
</tr>
<tr class="odd">
<td>3.</td>
<td>“dividends”</td>
<td>Yahoo Finance</td>
<td>quantmod::getDividends()</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>4.</td>
<td>“splits”</td>
<td>Yahoo Finance</td>
<td>quantmod::getSplits()</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>5.</td>
<td>“economic.data”</td>
<td>FRED</td>
<td>quantmod::getSymbols.FRED()</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>6.</td>
<td>“metal.prices”</td>
<td>Oanda</td>
<td>quantmod::getSymbols()</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>7.</td>
<td>“exchange.rates”</td>
<td>Oanda</td>
<td>quantmod::getFX()</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>8.</td>
<td>“quandl”</td>
<td>Quandl</td>
<td>Quandl::Quandl()</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>9.</td>
<td>“quandl.datatable”</td>
<td>Quandl</td>
<td>Quandl::Quandl.datatable()</td>
<td>Yes</td>
</tr>
<tr class="even">
<td>10.</td>
<td>“alphavantager”</td>
<td>Alpha Vantage</td>
<td>alphavantager::av_get()</td>
<td>Yes</td>
</tr>
<tr class="odd">
<td>11.</td>
<td>“rblpapi”</td>
<td>Bloomberg</td>
<td>Rblpapi</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>Please note that in this function there are also some options which are discontinued. Those options are not listed in Table . The Yahoo Finance Japan is in japanese language, which I don’t understand, so analyzing the <code class="r">get="stock.prices.japan"</code> option doesn’t make sense. <code class="r">get="quandl"</code> option doesn’t differ significantly from <code class="r">get="quandl.database"</code>. The <code class="r">get="rblpapi"</code> option requires Bloomberg API for which one has to pay. Therefore, those 3 options will not included in the analysis.</p>
</div>
</div>
<div id="analysis" class="section level1">
<h1>Analysis</h1>
<p>The following analysis is structured as following. Firstly, I will</p>
<div id="markets" class="section level2">
<h2>Markets</h2>
<p>In the following analysis, I am going to examine one by one the above-listed options:</p>
<ul>
<li>NYSE
<ul>
<li>TSLA, MSCF, AAPL, GM, F, GE. Please note that 3 of the stocks that I chose are growth and 3 are value. More information on the distinction between growth vs value stock is available on <a href="https://www.investopedia.com/articles/professionals/072415/value-or-growth-stocks-which-best.asp">Investopedia</a>.</li>
</ul></li>
<li>ETF
<ul>
<li><a href="https://finance.yahoo.com/quote/GOEX?p=GOEX">GOEX</a>, <a href="https://finance.yahoo.com/quote/ATMP?p=ATMP">ATMP</a></li>
</ul></li>
<li>Bonds
<ul>
<li>US 3M, US 10Y</li>
</ul></li>
<li>Commodities
<ul>
<li>Gold, Silver, Palladium, Coffee, Soybeans</li>
</ul></li>
<li>Warsaw Stock Exchange (<a href="https://en.wikipedia.org/wiki/Warsaw_Stock_Exchange">WSE</a>)
<ul>
<li>WIG20 is the index consisting of 20 biggest stocks listed on the WSE. I am interested in following stock: CDR, MBK, JSW.</li>
</ul></li>
<li>Exchange rates - fiat currencies
<ul>
<li>EURUSD, EURPLN, EURRUB, EURTRY</li>
</ul></li>
<li>Exchange rates - crytocurrencies
<ul>
<li>Bitcoin, Etherium, XRP</li>
</ul></li>
<li>Economic data
<ul>
<li>GDP Germany, GDP Poland, unemployment rate - Germany, unemployment rate - Poland</li>
</ul></li>
</ul>
</div>
<div id="options" class="section level2">
<h2>Options</h2>
<div id="stock.prices" class="section level3">
<h3>stock.prices</h3>
<p>Firstly, let’s examine what is the default output of the <code class="r">tq_get</code> function, when using <code class="r">get="stock.prices"</code>. Especially, I am interested in the default time range.</p>
<pre class="r"><code>stock_data_yahoo &lt;- tq_get(stocks_nyse_yahoo, get = &quot;stock.prices&quot;)
stock_data_yahoo %&gt;%
  group_by(symbol) %&gt;%
  select(symbol, date) %&gt;%
  summarise(n_obs = n(), min(date), max(date)) %&gt;%
  kable(booktabs = TRUE,
        caption = &#39;Default time ranges - &quot;stock.price&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:stock_prices_default)Default time ranges - “stock.price” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
2523
</td>
<td style="text-align:left;">
2010-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
2523
</td>
<td style="text-align:left;">
2010-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
2523
</td>
<td style="text-align:left;">
2010-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GM
</td>
<td style="text-align:right;">
2301
</td>
<td style="text-align:left;">
2010-11-18
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
2523
</td>
<td style="text-align:left;">
2010-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
TSLA
</td>
<td style="text-align:right;">
2401
</td>
<td style="text-align:left;">
2010-06-29
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
</tbody>
</table>
<p>It seems that only the last 10 years of data are available dy default (it is not specified in the documnetation) using this method, which is not that bad after all.
In the <code class="r">getSymbols()</code> function there is actually, another argument: <code class="r">from</code> might enhance the number of observations. Let’s check it out.</p>
<pre class="r"><code>exec_start_time &lt;- Sys.time()
market_data_yahoo &lt;- tq_get(stocks_nyse_yahoo, get=&quot;stock.prices&quot;, complete_cases = TRUE,from = &quot;1900-01-01&quot;)
exec_end_time &lt;- Sys.time()

market_data_yahoo %&gt;% 
  group_by(symbol) %&gt;% 
  select(symbol,date) %&gt;% 
  summarise(n_obs=n(),min(date),max(date)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;stock.price&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:stock_prices_custom)Custom time ranges - “stock.price” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
9854
</td>
<td style="text-align:left;">
1980-12-12
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
12008
</td>
<td style="text-align:left;">
1972-06-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
14607
</td>
<td style="text-align:left;">
1962-01-02
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GM
</td>
<td style="text-align:right;">
2301
</td>
<td style="text-align:left;">
2010-11-18
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
8528
</td>
<td style="text-align:left;">
1986-03-13
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
TSLA
</td>
<td style="text-align:right;">
2401
</td>
<td style="text-align:left;">
2010-06-29
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
</tbody>
</table>
<p>What I found quiet suprising is that GM had an IPO on November, 18th 2010. I thougth that they were listed on the market since 70s or 80s.
Unfortunately, it is not possible to get data on a more frequent basis than daily and no data on Warsaw Stock Exchange is available on Yahoo Stock Exchange. The whole process of downloading data from Yahoo Finance is relatively fast - it takes only 5.8279219.</p>
<div id="sanity-check" class="section level4">
<h4>Sanity check</h4>
<p>As a sanity check, I want to check if all historical data is available. To perform this task, I want to inspect whether:</p>
<ol style="list-style-type: decimal">
<li>the number of trading days for each year is equal to ~250,</li>
<li>between different stocks for each the number of trading days is the same.</li>
</ol>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"data":[{"x":[1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[13,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],"text":["year: 1980<br />n_obs_year:  13<br />symbol: AAPL","year: 1981<br />n_obs_year: 253<br />symbol: AAPL","year: 1982<br />n_obs_year: 253<br />symbol: AAPL","year: 1983<br />n_obs_year: 253<br />symbol: AAPL","year: 1984<br />n_obs_year: 253<br />symbol: AAPL","year: 1985<br />n_obs_year: 252<br />symbol: AAPL","year: 1986<br />n_obs_year: 253<br />symbol: AAPL","year: 1987<br />n_obs_year: 253<br />symbol: AAPL","year: 1988<br />n_obs_year: 253<br />symbol: AAPL","year: 1989<br />n_obs_year: 252<br />symbol: AAPL","year: 1990<br />n_obs_year: 253<br />symbol: AAPL","year: 1991<br />n_obs_year: 253<br />symbol: AAPL","year: 1992<br />n_obs_year: 254<br />symbol: AAPL","year: 1993<br />n_obs_year: 253<br />symbol: AAPL","year: 1994<br />n_obs_year: 252<br />symbol: AAPL","year: 1995<br />n_obs_year: 252<br />symbol: AAPL","year: 1996<br />n_obs_year: 254<br />symbol: AAPL","year: 1997<br />n_obs_year: 253<br />symbol: AAPL","year: 1998<br />n_obs_year: 252<br />symbol: AAPL","year: 1999<br />n_obs_year: 252<br />symbol: AAPL","year: 2000<br />n_obs_year: 252<br />symbol: AAPL","year: 2001<br />n_obs_year: 248<br />symbol: AAPL","year: 2002<br />n_obs_year: 252<br />symbol: AAPL","year: 2003<br />n_obs_year: 252<br />symbol: AAPL","year: 2004<br />n_obs_year: 252<br />symbol: AAPL","year: 2005<br />n_obs_year: 252<br />symbol: AAPL","year: 2006<br />n_obs_year: 251<br />symbol: AAPL","year: 2007<br />n_obs_year: 251<br />symbol: AAPL","year: 2008<br />n_obs_year: 253<br />symbol: AAPL","year: 2009<br />n_obs_year: 252<br />symbol: AAPL","year: 2010<br />n_obs_year: 252<br />symbol: AAPL","year: 2011<br />n_obs_year: 252<br />symbol: AAPL","year: 2012<br />n_obs_year: 250<br />symbol: AAPL","year: 2013<br />n_obs_year: 252<br />symbol: AAPL","year: 2014<br />n_obs_year: 252<br />symbol: AAPL","year: 2015<br />n_obs_year: 252<br />symbol: AAPL","year: 2016<br />n_obs_year: 252<br />symbol: AAPL","year: 2017<br />n_obs_year: 251<br />symbol: AAPL","year: 2018<br />n_obs_year: 251<br />symbol: AAPL","year: 2019<br />n_obs_year: 252<br />symbol: AAPL","year: 2020<br />n_obs_year:   7<br />symbol: AAPL"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)","dash":"solid"},"hoveron":"points","name":"AAPL","legendgroup":"AAPL","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[146,252,253,253,253,252,252,253,253,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],"text":["year: 1972<br />n_obs_year: 146<br />symbol: F","year: 1973<br />n_obs_year: 252<br />symbol: F","year: 1974<br />n_obs_year: 253<br />symbol: F","year: 1975<br />n_obs_year: 253<br />symbol: F","year: 1976<br />n_obs_year: 253<br />symbol: F","year: 1977<br />n_obs_year: 252<br />symbol: F","year: 1978<br />n_obs_year: 252<br />symbol: F","year: 1979<br />n_obs_year: 253<br />symbol: F","year: 1980<br />n_obs_year: 253<br />symbol: F","year: 1981<br />n_obs_year: 253<br />symbol: F","year: 1982<br />n_obs_year: 253<br />symbol: F","year: 1983<br />n_obs_year: 253<br />symbol: F","year: 1984<br />n_obs_year: 253<br />symbol: F","year: 1985<br />n_obs_year: 252<br />symbol: F","year: 1986<br />n_obs_year: 253<br />symbol: F","year: 1987<br />n_obs_year: 253<br />symbol: F","year: 1988<br />n_obs_year: 253<br />symbol: F","year: 1989<br />n_obs_year: 252<br />symbol: F","year: 1990<br />n_obs_year: 253<br />symbol: F","year: 1991<br />n_obs_year: 253<br />symbol: F","year: 1992<br />n_obs_year: 254<br />symbol: F","year: 1993<br />n_obs_year: 253<br />symbol: F","year: 1994<br />n_obs_year: 252<br />symbol: F","year: 1995<br />n_obs_year: 252<br />symbol: F","year: 1996<br />n_obs_year: 254<br />symbol: F","year: 1997<br />n_obs_year: 253<br />symbol: F","year: 1998<br />n_obs_year: 252<br />symbol: F","year: 1999<br />n_obs_year: 252<br />symbol: F","year: 2000<br />n_obs_year: 252<br />symbol: F","year: 2001<br />n_obs_year: 248<br />symbol: F","year: 2002<br />n_obs_year: 252<br />symbol: F","year: 2003<br />n_obs_year: 252<br />symbol: F","year: 2004<br />n_obs_year: 252<br />symbol: F","year: 2005<br />n_obs_year: 252<br />symbol: F","year: 2006<br />n_obs_year: 251<br />symbol: F","year: 2007<br />n_obs_year: 251<br />symbol: F","year: 2008<br />n_obs_year: 253<br />symbol: F","year: 2009<br />n_obs_year: 252<br />symbol: F","year: 2010<br />n_obs_year: 252<br />symbol: F","year: 2011<br />n_obs_year: 252<br />symbol: F","year: 2012<br />n_obs_year: 250<br />symbol: F","year: 2013<br />n_obs_year: 252<br />symbol: F","year: 2014<br />n_obs_year: 252<br />symbol: F","year: 2015<br />n_obs_year: 252<br />symbol: F","year: 2016<br />n_obs_year: 252<br />symbol: F","year: 2017<br />n_obs_year: 251<br />symbol: F","year: 2018<br />n_obs_year: 251<br />symbol: F","year: 2019<br />n_obs_year: 252<br />symbol: F","year: 2020<br />n_obs_year:   7<br />symbol: F"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)","dash":"solid"},"hoveron":"points","name":"F","legendgroup":"F","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[252,251,253,252,252,251,226,250,254,253,251,252,253,253,253,252,252,253,253,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],"text":["year: 1962<br />n_obs_year: 252<br />symbol: GE","year: 1963<br />n_obs_year: 251<br />symbol: GE","year: 1964<br />n_obs_year: 253<br />symbol: GE","year: 1965<br />n_obs_year: 252<br />symbol: GE","year: 1966<br />n_obs_year: 252<br />symbol: GE","year: 1967<br />n_obs_year: 251<br />symbol: GE","year: 1968<br />n_obs_year: 226<br />symbol: GE","year: 1969<br />n_obs_year: 250<br />symbol: GE","year: 1970<br />n_obs_year: 254<br />symbol: GE","year: 1971<br />n_obs_year: 253<br />symbol: GE","year: 1972<br />n_obs_year: 251<br />symbol: GE","year: 1973<br />n_obs_year: 252<br />symbol: GE","year: 1974<br />n_obs_year: 253<br />symbol: GE","year: 1975<br />n_obs_year: 253<br />symbol: GE","year: 1976<br />n_obs_year: 253<br />symbol: GE","year: 1977<br />n_obs_year: 252<br />symbol: GE","year: 1978<br />n_obs_year: 252<br />symbol: GE","year: 1979<br />n_obs_year: 253<br />symbol: GE","year: 1980<br />n_obs_year: 253<br />symbol: GE","year: 1981<br />n_obs_year: 253<br />symbol: GE","year: 1982<br />n_obs_year: 253<br />symbol: GE","year: 1983<br />n_obs_year: 253<br />symbol: GE","year: 1984<br />n_obs_year: 253<br />symbol: GE","year: 1985<br />n_obs_year: 252<br />symbol: GE","year: 1986<br />n_obs_year: 253<br />symbol: GE","year: 1987<br />n_obs_year: 253<br />symbol: GE","year: 1988<br />n_obs_year: 253<br />symbol: GE","year: 1989<br />n_obs_year: 252<br />symbol: GE","year: 1990<br />n_obs_year: 253<br />symbol: GE","year: 1991<br />n_obs_year: 253<br />symbol: GE","year: 1992<br />n_obs_year: 254<br />symbol: GE","year: 1993<br />n_obs_year: 253<br />symbol: GE","year: 1994<br />n_obs_year: 252<br />symbol: GE","year: 1995<br />n_obs_year: 252<br />symbol: GE","year: 1996<br />n_obs_year: 254<br />symbol: GE","year: 1997<br />n_obs_year: 253<br />symbol: GE","year: 1998<br />n_obs_year: 252<br />symbol: GE","year: 1999<br />n_obs_year: 252<br />symbol: GE","year: 2000<br />n_obs_year: 252<br />symbol: GE","year: 2001<br />n_obs_year: 248<br />symbol: GE","year: 2002<br />n_obs_year: 252<br />symbol: GE","year: 2003<br />n_obs_year: 252<br />symbol: GE","year: 2004<br />n_obs_year: 252<br />symbol: GE","year: 2005<br />n_obs_year: 252<br />symbol: GE","year: 2006<br />n_obs_year: 251<br />symbol: GE","year: 2007<br />n_obs_year: 251<br />symbol: GE","year: 2008<br />n_obs_year: 253<br />symbol: GE","year: 2009<br />n_obs_year: 252<br />symbol: GE","year: 2010<br />n_obs_year: 252<br />symbol: GE","year: 2011<br />n_obs_year: 252<br />symbol: GE","year: 2012<br />n_obs_year: 250<br />symbol: GE","year: 2013<br />n_obs_year: 252<br />symbol: GE","year: 2014<br />n_obs_year: 252<br />symbol: GE","year: 2015<br />n_obs_year: 252<br />symbol: GE","year: 2016<br />n_obs_year: 252<br />symbol: GE","year: 2017<br />n_obs_year: 251<br />symbol: GE","year: 2018<br />n_obs_year: 251<br />symbol: GE","year: 2019<br />n_obs_year: 252<br />symbol: GE","year: 2020<br />n_obs_year:   7<br />symbol: GE"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)","dash":"solid"},"hoveron":"points","name":"GE","legendgroup":"GE","showlegend":true,"xaxis":"x","yaxis":"y3","hoverinfo":"text","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[30,252,250,252,252,252,252,251,251,252,7],"text":["year: 2010<br />n_obs_year:  30<br />symbol: GM","year: 2011<br />n_obs_year: 252<br />symbol: GM","year: 2012<br />n_obs_year: 250<br />symbol: GM","year: 2013<br />n_obs_year: 252<br />symbol: GM","year: 2014<br />n_obs_year: 252<br />symbol: GM","year: 2015<br />n_obs_year: 252<br />symbol: GM","year: 2016<br />n_obs_year: 252<br />symbol: GM","year: 2017<br />n_obs_year: 251<br />symbol: GM","year: 2018<br />n_obs_year: 251<br />symbol: GM","year: 2019<br />n_obs_year: 252<br />symbol: GM","year: 2020<br />n_obs_year:   7<br />symbol: GM"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)","dash":"solid"},"hoveron":"points","name":"GM","legendgroup":"GM","showlegend":true,"xaxis":"x","yaxis":"y4","hoverinfo":"text","frame":null},{"x":[1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[204,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],"text":["year: 1986<br />n_obs_year: 204<br />symbol: MSFT","year: 1987<br />n_obs_year: 253<br />symbol: MSFT","year: 1988<br />n_obs_year: 253<br />symbol: MSFT","year: 1989<br />n_obs_year: 252<br />symbol: MSFT","year: 1990<br />n_obs_year: 253<br />symbol: MSFT","year: 1991<br />n_obs_year: 253<br />symbol: MSFT","year: 1992<br />n_obs_year: 254<br />symbol: MSFT","year: 1993<br />n_obs_year: 253<br />symbol: MSFT","year: 1994<br />n_obs_year: 252<br />symbol: MSFT","year: 1995<br />n_obs_year: 252<br />symbol: MSFT","year: 1996<br />n_obs_year: 254<br />symbol: MSFT","year: 1997<br />n_obs_year: 253<br />symbol: MSFT","year: 1998<br />n_obs_year: 252<br />symbol: MSFT","year: 1999<br />n_obs_year: 252<br />symbol: MSFT","year: 2000<br />n_obs_year: 252<br />symbol: MSFT","year: 2001<br />n_obs_year: 248<br />symbol: MSFT","year: 2002<br />n_obs_year: 252<br />symbol: MSFT","year: 2003<br />n_obs_year: 252<br />symbol: MSFT","year: 2004<br />n_obs_year: 252<br />symbol: MSFT","year: 2005<br />n_obs_year: 252<br />symbol: MSFT","year: 2006<br />n_obs_year: 251<br />symbol: MSFT","year: 2007<br />n_obs_year: 251<br />symbol: MSFT","year: 2008<br />n_obs_year: 253<br />symbol: MSFT","year: 2009<br />n_obs_year: 252<br />symbol: MSFT","year: 2010<br />n_obs_year: 252<br />symbol: MSFT","year: 2011<br />n_obs_year: 252<br />symbol: MSFT","year: 2012<br />n_obs_year: 250<br />symbol: MSFT","year: 2013<br />n_obs_year: 252<br />symbol: MSFT","year: 2014<br />n_obs_year: 252<br />symbol: MSFT","year: 2015<br />n_obs_year: 252<br />symbol: MSFT","year: 2016<br />n_obs_year: 252<br />symbol: MSFT","year: 2017<br />n_obs_year: 251<br />symbol: MSFT","year: 2018<br />n_obs_year: 251<br />symbol: MSFT","year: 2019<br />n_obs_year: 252<br />symbol: MSFT","year: 2020<br />n_obs_year:   7<br />symbol: MSFT"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)","dash":"solid"},"hoveron":"points","name":"MSFT","legendgroup":"MSFT","showlegend":true,"xaxis":"x","yaxis":"y5","hoverinfo":"text","frame":null},{"x":[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],"y":[130,252,250,252,252,252,252,251,251,252,7],"text":["year: 2010<br />n_obs_year: 130<br />symbol: TSLA","year: 2011<br />n_obs_year: 252<br />symbol: TSLA","year: 2012<br />n_obs_year: 250<br />symbol: TSLA","year: 2013<br />n_obs_year: 252<br />symbol: TSLA","year: 2014<br />n_obs_year: 252<br />symbol: TSLA","year: 2015<br />n_obs_year: 252<br />symbol: TSLA","year: 2016<br />n_obs_year: 252<br />symbol: TSLA","year: 2017<br />n_obs_year: 251<br />symbol: TSLA","year: 2018<br />n_obs_year: 251<br />symbol: TSLA","year: 2019<br />n_obs_year: 252<br />symbol: TSLA","year: 2020<br />n_obs_year:   7<br />symbol: TSLA"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)","dash":"solid"},"hoveron":"points","name":"TSLA","legendgroup":"TSLA","showlegend":true,"xaxis":"x","yaxis":"y6","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.4520547945205,"r":18.9954337899543,"b":40.1826484018265,"l":43.1050228310502},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Number of trading days per year","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[1959.1,2022.9],"tickmode":"array","ticktext":["1960","1980","2000","2020"],"tickvals":[1960,1980,2000,2020],"categoryorder":"array","categoryarray":["1960","1980","2000","2020"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y6","title":"","hoverformat":".2f"},"annotations":[{"text":"year","x":0.5,"y":-0.0176940639269406,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis"},{"text":"n_obs_year","x":-0.0159001956947162,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis"},{"text":"AAPL","x":1,"y":0.919520547945206,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"F","x":1,"y":0.75,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"GE","x":1,"y":0.583333333333333,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"GM","x":1,"y":0.416666666666667,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"MSFT","x":1,"y":0.25,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"TSLA","x":1,"y":0.0804794520547946,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":90,"xanchor":"left","yanchor":"middle"},{"text":"symbol","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"yaxis":{"domain":[0.839041095890411,1],"automargin":true,"type":"linear","autorange":false,"range":[-5.35,266.35],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.839041095890411,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.839041095890411,"y1":1,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.672374429223744,"y1":0.827625570776256},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.672374429223744,"y1":0.827625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.505707762557078,"y1":0.660958904109589},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.505707762557078,"y1":0.660958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.339041095890411,"y1":0.494292237442922},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.339041095890411,"y1":0.494292237442922,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0.172374429223744,"y1":0.327625570776256},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0.172374429223744,"y1":0.327625570776256,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":0.160958904109589},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","y0":0,"y1":0.160958904109589,"x0":0,"x1":23.37899543379,"xanchor":1,"xsizemode":"pixel"}],"yaxis2":{"type":"linear","autorange":false,"range":[-5.35,266.35],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.672374429223744,0.827625570776256],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis3":{"type":"linear","autorange":false,"range":[-5.35,266.35],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.505707762557078,0.660958904109589],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis4":{"type":"linear","autorange":false,"range":[-5.25,264.25],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.339041095890411,0.494292237442922],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis5":{"type":"linear","autorange":false,"range":[-5.35,266.35],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.172374429223744,0.327625570776256],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"yaxis6":{"type":"linear","autorange":false,"range":[-5.25,264.25],"tickmode":"array","ticktext":["0","50","100","150","200","250"],"tickvals":[0,50,100,150,200,250],"categoryorder":"array","categoryarray":["0","50","100","150","200","250"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.160958904109589],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":-0.2,"orientation":"h","x":0.4},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"45406444222d":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"45406444222d","visdat":{"45406444222d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>In general the numbner of trading days for each stock is ~250. However, from the quick overview, it can be clearly seen that for GE in 1968 something might be wrong. Detailed analysis, if the number of trading days in a year is the same for each stock is presented below.</p>
<pre class="r"><code>market_data_yahoo_year %&gt;% 
  arrange(year) %&gt;% 
  group_by(year) %&gt;% 
  mutate(n_obs_change = ifelse(length(unique(n_obs_year[!is.na(n_obs_year)])) &gt; 1, 1, 0)) %&gt;% 
  filter(n_obs_change==1 &amp; (row_number()==1)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Cases when number of trading dates differed&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:stock_prices_sanity_check_2)Cases when number of trading dates differed
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
n_obs_year
</th>
<th style="text-align:right;">
n_obs_change
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
1972
</td>
<td style="text-align:right;">
146
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
1986
</td>
<td style="text-align:right;">
253
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:right;">
252
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
<p>The only years when the number od trading days is different is when a stock had an IPO. Therefore, both sanity checks proven that our data is complete. One can browse data on number of trading days in year per stock in the below-listed table.</p>
<pre class="r"><code>market_data_yahoo_year %&gt;% 
  arrange(year) %&gt;% 
  pivot_wider(names_from=symbol, values_from = n_obs_year) %&gt;% 
  datatable()</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"],[1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020],[252,251,253,252,252,251,226,250,254,253,251,252,253,253,253,252,252,253,253,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],[null,null,null,null,null,null,null,null,null,null,146,252,253,253,253,252,252,253,253,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,13,253,253,253,253,252,253,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,204,253,253,252,253,253,254,253,252,252,254,253,252,252,252,248,252,252,252,252,251,251,253,252,252,252,250,252,252,252,252,251,251,252,7],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,30,252,250,252,252,252,252,251,251,252,7],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,130,252,250,252,252,252,252,251,251,252,7]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>year<\/th>\n      <th>GE<\/th>\n      <th>F<\/th>\n      <th>AAPL<\/th>\n      <th>MSFT<\/th>\n      <th>GM<\/th>\n      <th>TSLA<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6,7]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="other-markets" class="section level4">
<h4>Other markets</h4>
<p>On Yahoo Finance it is possible to access also data on ETFs, bonds, commodities, exchange rate. Therefore, let’s examine if option <code class="r">get="stock.prices"</code> enables to download this data.</p>
<pre class="r"><code>market_data_all_yahoo &lt;- tq_get(markets_yahoo, get = &quot;stock.prices&quot;, from=&quot;1900-01-01&quot;)

market_data_all_yahoo %&gt;%
  group_by(symbol) %&gt;% 
  summarise(n_obs=n(),min(date),max(date)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Market data - &quot;stock.price&quot; option&#39;)%&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)  </code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:stock_prices_other_markets)Market data - “stock.price” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
^IRX
</td>
<td style="text-align:right;">
18673
</td>
<td style="text-align:left;">
1960-01-04
</td>
<td style="text-align:left;">
2020-01-09
</td>
</tr>
<tr>
<td style="text-align:left;">
^TNX
</td>
<td style="text-align:right;">
18049
</td>
<td style="text-align:left;">
1962-01-02
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
9854
</td>
<td style="text-align:left;">
1980-12-12
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
ATMP
</td>
<td style="text-align:right;">
1721
</td>
<td style="text-align:left;">
2013-03-13
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
BTC-USD
</td>
<td style="text-align:right;">
1943
</td>
<td style="text-align:left;">
2014-09-17
</td>
<td style="text-align:left;">
2020-01-12
</td>
</tr>
<tr>
<td style="text-align:left;">
ETH-USD
</td>
<td style="text-align:right;">
1619
</td>
<td style="text-align:left;">
2015-08-07
</td>
<td style="text-align:left;">
2020-01-12
</td>
</tr>
<tr>
<td style="text-align:left;">
EURPLN=X
</td>
<td style="text-align:right;">
4639
</td>
<td style="text-align:left;">
2002-04-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
EURRUB=X
</td>
<td style="text-align:right;">
4204
</td>
<td style="text-align:left;">
2003-12-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
EURTRY=X
</td>
<td style="text-align:right;">
3919
</td>
<td style="text-align:left;">
2005-01-03
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
EURUSD=X
</td>
<td style="text-align:right;">
4205
</td>
<td style="text-align:left;">
2003-12-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
12008
</td>
<td style="text-align:left;">
1972-06-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GC=F
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
2019-12-30
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
14607
</td>
<td style="text-align:left;">
1962-01-02
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GM
</td>
<td style="text-align:right;">
2301
</td>
<td style="text-align:left;">
2010-11-18
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
GOEX
</td>
<td style="text-align:right;">
2311
</td>
<td style="text-align:left;">
2010-11-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
KC=F
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:left;">
2019-11-20
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
8528
</td>
<td style="text-align:left;">
1986-03-13
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
PA=F
</td>
<td style="text-align:right;">
314
</td>
<td style="text-align:left;">
2018-12-30
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
SI=F
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
2019-12-30
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
SM=F
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
2019-12-17
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
TSLA
</td>
<td style="text-align:right;">
2401
</td>
<td style="text-align:left;">
2010-06-29
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
XRP-USD
</td>
<td style="text-align:right;">
1943
</td>
<td style="text-align:left;">
2014-09-17
</td>
<td style="text-align:left;">
2020-01-12
</td>
</tr>
</tbody>
</table>
<p>There is full history of data available for stocks, ETFs, bonds, cryptocurrencies. Partial historical data is provided for exchange rates and there is only sparse data on commodities.</p>
</div>
</div>
<div id="dividends" class="section level3">
<h3>dividends</h3>
<p>Dividends are available only for stocks, so only they will be analyzied.</p>
<pre class="r"><code>dividend_data_yahoo &lt;- tq_get(stocks_nyse_yahoo, get=&quot;dividends&quot;, from=&quot;1900-01-01&quot;)
dividend_data_yahoo %&gt;% 
  group_by(symbol) %&gt;% 
  select(symbol,date,dividends) %&gt;% 
  summarise(n_obs=n(),min(date),max(date),max_dividend=max(round(dividends,2)))%&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;dividends&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:dividends">Table 1: </span>Custom time ranges - “dividends” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
<th style="text-align:right;">
max_dividend
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:left;">
1987-05-11
</td>
<td style="text-align:left;">
2019-11-07
</td>
<td style="text-align:right;">
0.77
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
165
</td>
<td style="text-align:left;">
1972-07-25
</td>
<td style="text-align:left;">
2019-10-21
</td>
<td style="text-align:right;">
0.30
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
234
</td>
<td style="text-align:left;">
1962-03-13
</td>
<td style="text-align:left;">
2019-12-20
</td>
<td style="text-align:right;">
0.30
</td>
</tr>
<tr>
<td style="text-align:left;">
GM
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
2014-03-14
</td>
<td style="text-align:left;">
2019-12-05
</td>
<td style="text-align:right;">
0.38
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:left;">
2003-02-19
</td>
<td style="text-align:left;">
2019-11-20
</td>
<td style="text-align:right;">
3.08
</td>
</tr>
</tbody>
</table>
<p>From our data it seems that Tesla is the only company that didn’t pay out dividend to stockholders. <a href="https://www.nasdaq.com/market-activity/stocks/tsla/dividend-history">NASDAQ website</a> confirms it. Note that I specify the starting date as <code>1900-01-01</code> in order to make sure that I download all historic data.</p>
</div>
<div id="splits" class="section level3">
<h3>splits</h3>
<p>For those that are unaware of what a stock split is I recommend to refer to <a href="https://www.investopedia.com/ask/answers/what-stock-split-why-do-stocks-split/">Investopedia</a>.
Getting data on splits is important as it helps to understand better the changes in stock price, as a stock’s price is also affected by a stock split. After a split, the stock price will be reduced since the number of shares outstanding has increased.</p>
<pre class="r"><code>splits_data_yahoo &lt;- tq_get(stocks_nyse_yahoo, get=&quot;splits&quot;, from=&quot;1900-01-01&quot;)
splits_data_yahoo %&gt;% 
  group_by(symbol) %&gt;% 
  select(symbol,date) %&gt;% 
  summarise(n_obs=n(),min(date),max(date)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;splits&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:splits">Table 2: </span>Custom time ranges - “splits” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
1987-06-16
</td>
<td style="text-align:left;">
2014-06-09
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
1977-06-27
</td>
<td style="text-align:left;">
2000-08-03
</td>
</tr>
<tr>
<td style="text-align:left;">
GE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
1971-06-08
</td>
<td style="text-align:left;">
2019-02-26
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
1987-09-21
</td>
<td style="text-align:left;">
2003-02-18
</td>
</tr>
</tbody>
</table>
<p>I compared the number of splits for GE from our database with the data from this <a href="https://www.stocksplithistory.com/general-electric/">website</a> and it seems that our data is correct.</p>
</div>
<div id="economic.data" class="section level3">
<h3>economic.data</h3>
<p>The data is being retrieved from Federal Reserve Economic Data ( <a href="https://fred.stlouisfed.org">FRED</a> ) when using <code>type="economic.data</code>.
This section is going to be covered later.</p>
</div>
<div id="metal.prices" class="section level3">
<h3>metal.prices</h3>
<p>Metal prices are obtained from <a href="https://www.oanda.com">Oanda</a>.</p>
<pre class="r"><code>metal_prices_data_oanda &lt;- tq_get(c(&quot;XAG&quot;,&quot;XAU&quot;, &quot;XPD&quot;), get=&quot;metal.prices&quot;, from=&quot;1900-01-01&quot;)
metal_prices_data_oanda  %&gt;%
  group_by(symbol) %&gt;% 
  summarise(n_obs=n(),min(date),max(date)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;metal.prices&quot; option&#39;) %&gt;% 
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:metal_prices)Custom time ranges - “metal.prices” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
XAG
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
XAU
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
XPD
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
</tbody>
</table>
<p>Unfortunately, Oanda only provides historical data for the past 180 days. What is also missing is the fact that rates such as “XAUXAG” or for commodities like coffeee or soybeans are not available.</p>
</div>
<div id="exchange.rates" class="section level3">
<h3>exchange.rates</h3>
<p>When using <code class="r">get="exchange.rates"</code> option the data is received from the <a href="https://www.oanda.com">Oanda</a>.</p>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:fx_rates)Custom time ranges - “exchange.rates” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
EUR/PLN
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
EUR/RUB
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
EUR/TRY
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
EUR/USD
</td>
<td style="text-align:right;">
180
</td>
<td style="text-align:left;">
2019-07-16
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
</tbody>
</table>
<p>Here, the same situation as in the case of <code class="r">get="metal.prices"</code> when downloading data from Oanda is observed - only data from last 180 days is available. Therefore, I conclude that data from Yahoo Finance is way more convinient than from Oanda, as more historical data is there.</p>
<div id="sanity-check-1" class="section level4">
<h4>Sanity check</h4>
<p>Once, I have data on precious metals and exchange rates for fiat currencies from 2 different sources I can check what is the spread between them for the past 180 days.</p>
<p><img src="/blog/2020-01-12-analysis-of-the-tq-get-function_files/figure-html/fx_rates_sanity_check-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>When creating the spread plot, it became visible that Oanda provides data for the last 180 consecutive dates, including weekends. Whereas, Yahoo Finance database contains exchange rates only for weekdays.</p>
</div>
</div>
<div id="quandl" class="section level3">
<h3>quandl</h3>
<p>To get data from <a href="quandl.com">Quandl</a> it is necessary to set API key using:</p>
<pre class="r"><code>quandl_api_key(your_api_key) </code></pre>
<p>before executing any code. Registration on Quandl is free, as well as access to free databases. There are some premium databases though.
There is no master database containing all data but rather databases from different institutions that share data, e.g. ECB, FRED. Therefore, one needs to search the desired data firstly on the quandl website to find the correct ticker and then paste it to the R. Additionally, different databases consist of different time ranges, different column names and types, what poses problems when combining them.<br />
I couldn’t find any free database on Quandl containing data on stocks from NYSE, US bonds, ETFs and some commodities.
What suprised me is that contrary to previously tested options, here I have the possibility to download data from Warsaw Stock Exchnage.</p>
<pre class="r"><code>data_quandl %&gt;% 
  group_by(symbol) %&gt;% 
  summarise(n_obs=n(),min(date),max(date)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;quandl&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:quandl_data_2)Custom time ranges - “quandl” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(date)
</th>
<th style="text-align:left;">
max(date)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BITFINEX/ETHUSD
</td>
<td style="text-align:right;">
1359
</td>
<td style="text-align:left;">
2016-03-14
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
BITFINEX/XRPUSD
</td>
<td style="text-align:right;">
932
</td>
<td style="text-align:left;">
2017-05-19
</td>
<td style="text-align:left;">
2020-01-11
</td>
</tr>
<tr>
<td style="text-align:left;">
BITSTAMP/USD
</td>
<td style="text-align:right;">
2074
</td>
<td style="text-align:left;">
2014-04-15
</td>
<td style="text-align:left;">
2020-01-12
</td>
</tr>
<tr>
<td style="text-align:left;">
CHRIS/ICE_KC2
</td>
<td style="text-align:right;">
11191
</td>
<td style="text-align:left;">
1975-05-21
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
ECB/EURPLN
</td>
<td style="text-align:right;">
5382
</td>
<td style="text-align:left;">
1999-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
ECB/EURRUB
</td>
<td style="text-align:right;">
3783
</td>
<td style="text-align:left;">
2005-04-01
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
ECB/EURTRY
</td>
<td style="text-align:right;">
3845
</td>
<td style="text-align:left;">
2005-01-03
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
ECB/EURUSD
</td>
<td style="text-align:right;">
5382
</td>
<td style="text-align:left;">
1999-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
LPPM/PALL
</td>
<td style="text-align:right;">
7518
</td>
<td style="text-align:left;">
1990-04-02
</td>
<td style="text-align:left;">
2020-01-09
</td>
</tr>
<tr>
<td style="text-align:left;">
NASDAQOMX/XAG
</td>
<td style="text-align:right;">
2817
</td>
<td style="text-align:left;">
2008-11-03
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
NASDAQOMX/XAU
</td>
<td style="text-align:right;">
3667
</td>
<td style="text-align:left;">
2004-09-02
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
WSE/CDPROJEKT
</td>
<td style="text-align:right;">
1742
</td>
<td style="text-align:left;">
2013-01-04
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
WSE/JSW
</td>
<td style="text-align:right;">
2117
</td>
<td style="text-align:left;">
2011-07-06
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
<tr>
<td style="text-align:left;">
WSE/MBANK
</td>
<td style="text-align:right;">
1519
</td>
<td style="text-align:left;">
2013-11-26
</td>
<td style="text-align:left;">
2020-01-10
</td>
</tr>
</tbody>
</table>
<p>Even though the data on WSE is available through Quandl, it covers only past 7-10 years. If one has a premium account on Quandl and exactly knows the ticker, then using this option might be helpful. Otherwise, I reject to use this option in the future.</p>
</div>
<div id="alphavantager" class="section level3">
<h3>alphavantager</h3>
<p><a href="https://www.alphavantage.co/documentation/">Alpha Vantage API documentation</a> provides a great way of understanding what can be achieved using this API. However, it doesn’t provide any search engine for symbols or tickers.<br />
To use Alpha Vantage once must register with Alpha Vantage in order to dreveive an API key to download their data. Contrary to previously analyzed options, the Alpha Vantage site provides also intraday data. Set output.size=“full” to obtain the entire available history, for intraday data, the available history is the most recent 10 or 15 days.</p>
<pre class="r"><code>data_exchange_rates_av &lt;- tq_get(exchange_rates_av, 
                                 get = &quot;alphavantager&quot;, 
                                 av_fun = &quot;TIME_SERIES_INTRADAY&quot;, 
                                 interval = &quot;15min&quot;)

data_exchange_rates_av %&gt;%  
  group_by(symbol) %&gt;% 
  summarise(n_obs=n(),min(timestamp),max(timestamp)) %&gt;% 
  kable(booktabs = TRUE,
        caption = &#39;Custom time ranges - &quot;alphavantager&quot; option&#39;) %&gt;%
  kable_styling(bootstrap_options = 
                  c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = F)</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
(#tab:av_data_1)Custom time ranges - “alphavantager” option
</caption>
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:right;">
n_obs
</th>
<th style="text-align:left;">
min(timestamp)
</th>
<th style="text-align:left;">
max(timestamp)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
EURPLN
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
2020-01-09 16:45:00
</td>
<td style="text-align:left;">
2020-01-10 17:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
EURRUB
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
2020-01-09 16:45:00
</td>
<td style="text-align:left;">
2020-01-10 17:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
EURTRY
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
2020-01-09 16:45:00
</td>
<td style="text-align:left;">
2020-01-10 17:30:00
</td>
</tr>
<tr>
<td style="text-align:left;">
EURUSD
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:left;">
2020-01-09 16:30:00
</td>
<td style="text-align:left;">
2020-01-10 17:15:00
</td>
</tr>
</tbody>
</table>
<p>Unfortunately, getting data from Alpha Vantage is limited for the free use. When I tried to download exchange rates I got following error: <code class="r">Error: Our standard API call frequency is 5 calls per minute and 500 calls per day.</code>. Therefore, I would recommend making use of Alpha Vantage only in the case when you have premium account or you want to get a limited amount of data - 100 in the example/
What is more, when using <code class="r">get="alphavantager"</code> one need to specify additional paramter <code class="r">av_fun</code>.</p>
</div>
</div>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<p>The <code class="r">tq_get()</code> function is great when it comes to easily downloading daily histotical data on stocks traded on NYSE (option: <code class="r">get="stock.prices"</code>), including information on splits (option: <code class="r">get="splits"</code>) and dividends (option: <code class="r">get="dividends"</code>). The option: <code class="r">get="stock.prices"</code> is the best to download data on ETFs and bonds. When one needs to download intraday data on NYSE listed stocks then option: <code class="r">get="alphavantager"</code> option comes in handy but with only 100 last observations. For using this functionality, it is reqiured to create an API key. I couldn’t find any reliable source on getting data on commodities like coffee or soybeans. It is possible that I didn’t find the right ticker. For metal prices the option: <code class="r">get="metal.prices"</code> works the best. To get exchange rates for fiat currencies I used the ECB database by finding on the Quandl website the desired tickers and then setting the <code class="r">get="quandl"</code> option. When it comes to cryptocurrencies data from Yahoo Finance was sufficient (option: <code class="r">get="stock.prices"</code>).
Based on my analysis, I would recommend using following options for getting data:</p>
<table>
<thead>
<tr class="header">
<th>ID</th>
<th>Market</th>
<th>Option</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1.</td>
<td>NYSE</td>
<td>stock.prices (daily), alphavantager (intraday)</td>
</tr>
<tr class="even">
<td>2.</td>
<td>ETF</td>
<td>stock.prices</td>
</tr>
<tr class="odd">
<td>3.</td>
<td>Bonds</td>
<td>stock.prices</td>
</tr>
<tr class="even">
<td>4.</td>
<td>Commodities</td>
<td>metal.prices (only metals)</td>
</tr>
<tr class="odd">
<td>5.</td>
<td>WSE</td>
<td>quandl</td>
</tr>
<tr class="even">
<td>6.</td>
<td>Exchange Rates</td>
<td>quandl</td>
</tr>
<tr class="odd">
<td>7.</td>
<td>Exchange Rates - Crypto</td>
<td>stock.prices or quandl</td>
</tr>
</tbody>
</table>
<p>To sum up, <code class="r">tq_get()</code> function provides the user with an quick and intuitive way to download basic data for any financial or economic data for data analysis. It works fast and the limitations aren’t within the function itself but rather on the data providers side, as they impose limits on the amount of data they share.</p>
</div>


                <br>
            </div>
            
                <div class="navigation">
                    
                    <div style="width: 100%;"></div>
                    
                </div>
            
            <br>
            <div class="disqus">
                
            </div>
        </div>
    </div>
</section>

<section class="footer">
    <div class="container">
        <div class="copyright">

        
            <a href="/about">Copyright © 2020 Pawel Sobala</a>
        

        </div>
        <div class="icons">

        
            <a href="https://github.com/pawelsobala" target="_blank">
                <img class="icon" src="/img/github.svg" alt="github" />
            </a>
        

        
            <a href="https://twitter.com/pawel_sobala" target="_blank">
                <img class="icon" src="/img/twitter.svg" alt="twitter" />
            </a>
        

        
            <a href="https://www.linkedin.com/in/pawel-sobala-17560310b" target="_blank">
                <img class="icon" src="/img/linkedin.svg" alt="linkedin" />
            </a>
        

        

        
            <a href="/index.xml">
                <img class="icon" src="/img/rss.svg" alt="rss" />
            </a>
        

        </div>
    </div>
</section>

<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Raleway:400,600,700', 'Merriweather:300,300i,700,700i', 'Ubuntu+Mono:400,700']
    }
  });
</script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>


  <script src="/js/highlight.min.js" defer></script>
  



  <script src="/js/progressively.min.js" defer></script>




<script>
  window.onload = function() {
    
      hljs.initHighlighting();
    
    
      progressively.init({delay: 30, throttle: 50});
    
  };
</script>


</body>
</html>

